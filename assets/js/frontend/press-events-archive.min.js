!function(e){"use strict";if("undefined"==typeof pe_archive_event_params)return!1;var t={init:function(){e(".press-events-archive").find("select").chosen({disable_search_threshold:10,width:"100%"}),e(".press-events-archive").on("click",".filters-item.tags > a",this.tagFilter),"on"===pe_archive_event_params.ajax_archive&&e(".press-events-archive").on("click","#pe-archive-navigation > a",this.changeMonth).on("change",'select[name="archive-type"]',this.triggerUpdate).on("submit","form.archive-event-filters",this.fromSubmit)},tagFilter:function(t){t.preventDefault(),t.stopPropagation();var i=e(this).closest(".filters-item");i.toggleClass("active"),i.find(".panel-dropdown-content").on("click",function(e){e.stopPropagation()}).find("button").on("click",function(){e(this).closest(".filters-item").removeClass("active")}),e("body").on("click",function(){i.removeClass("active")})},changeMonth:function(i){var a=e(this),n=e(".press-events-archive");if(!a.data("target-month"))return!1;i.preventDefault();var r=a.data("target-month");n.find("input#target-month").val(r),t.triggerUpdate()},triggerUpdate:function(){e("form.archive-event-filters").trigger("submit")},fromSubmit:function(t){t.preventDefault();var i=e(this).serialize(),a=e(".press-events-archive");a.addClass("loading"),e.post(pe_archive_event_params.pe_ajax_url.toString().replace("%%endpoint%%","get_calendar"),i,function(e){if(e)if(e.error)location.reload();else{var t=e.data;a.find(".archive-event-header .archive-title h1").text(t.title),a.find("#pe-archive-navigation .previous").data("target-month",t.navigation.previous),a.find("#pe-archive-navigation .next").data("target-month",t.navigation.next),a.find('input[name="archive_month"]').val(t.month),a.find(".archive-event-wrapper").replaceWith(e.data.html),a.removeClass("loading")}})}};t.init()}(jQuery);